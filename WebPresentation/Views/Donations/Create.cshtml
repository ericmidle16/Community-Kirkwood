<!--
    /// <summary>
    /// Creator: Christivie Mauwa
    /// Created: 2025-04-24
    /// Summary: Created the create donatation view
    ///
    /// Updated By: Skyann
    /// Updated: 2025-04-27
    /// What Was Changed: Styling was added to the page.
    ///
    /// Updated By: Skyann Heintz
    /// Updated: 2025-04-30
    /// What Was Changed: Title was updated from h4 to h2
-->
@model DataDomain.DonationVM

@{
    ViewData["Title"] = "Donate To Project";
}

<div class="container">
    <div class="row justify-content-center">
        <div class="col-md-8 col-lg-6">
            <div class="card shadow-sm p-4">
                <h2 class="text-center mb-4">Donate to Project</h2>

                <form asp-action="Create">
                    <div asp-validation-summary="ModelOnly" class="text-danger"></div>
                    
                    <div class="form-group">
                        <label asp-for="UserName" class="control-label">Username</label>
                        <input asp-for="UserName" class="form-control" />
                        <span asp-validation-for="UserName" class="text-danger"></span>
                    </div>

                    <div class="form-group">
                        <label asp-for="Name" class="control-label">Project Name</label>
                        <input asp-for="Name" class="form-control" />
                        <span asp-validation-for="Name" class="text-danger"></span>
                    </div>

                    <div class="form-group">
                        <label asp-for="DonationType" class="control-label">Donation Type</label>
                        <select asp-for="DonationType" class="form-control" asp-items="ViewBag.DonationType">
                            <option value="">Select Donation Type</option>
                        </select>
                        <span asp-validation-for="DonationType" class="text-danger"></span>
                    </div>

                    <div class="form-group">
                        <input type="hidden" asp-for="UserID" id="UserID" class="form-control" />
                        <span asp-validation-for="UserID" class="text-danger"></span>
                    </div>

                    <div class="form-group">
                        <label asp-for="Amount" class="control-label">Donation Amount</label>
                        <input asp-for="Amount" class="form-control" />
                        <span asp-validation-for="Amount" class="text-danger"></span>
                    </div>

                    <div class="form-group">
                        <label asp-for="DonationDate" class="control-label">Donation Date</label>
                        <input asp-for="DonationDate" class="form-control" type="date" />
                        <span asp-validation-for="DonationDate" class="text-danger"></span>
                    </div>

                    <div class="form-group">
                        <label asp-for="Description" class="control-label">Description</label>
                        <input asp-for="Description" class="form-control" />
                        <span asp-validation-for="Description" class="text-danger"></span>
                    </div>

                    <div class="form-group">
                        <input type="checkbox" id="Anonymous" name="Anonymous" value="true" class="form-check-input" />
                        <label for="Anonymous" class="form-check-label">Donate Anonymously</label>
                    </div>

                    <input type="hidden" asp-for="ProjectID" />
                    <input type="hidden" value="LocationName" name="LocationName" />

                    <div class="form-group text-center mt-4">
                        <input type="submit" value="Donate" class="btn btn-success" />
                        <a asp-controller="Project" asp-action="Index" class="btn btn-secondary">Back to Projects</a>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>

@section Scripts {
    @{ await Html.RenderPartialAsync("_ValidationScriptsPartial"); }
}

<script>
    document.addEventListener('DOMContentLoaded', function () {
        const isAnonymous = document.getElementById('Anonymous');
        const userID = document.getElementById('UserID');
        const userName = document.querySelector('input[name="UserName"]');

        isAnonymous.addEventListener('change', function () {
            if (this.checked) {
                userID.value = "";
                userID.disabled = true;

                userName.value = "";
                userName.disabled = true;
            } else {
                userID.disabled = false;
                userName.disabled = false;
            }
        });
    });
</script>

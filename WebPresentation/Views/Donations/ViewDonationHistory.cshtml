<!--
    /// <summary>
    /// Creator:  Christivie Mauwa
    /// Created:  2025-04-24
    /// Summary:  This is the View for a user to see their entire donation history.
    ///
    /// Last Updated By: Kate Rich
    /// Last Updated: 2025-04-25
    /// What Was Changed:
    ///         Added a div containing an ActionLink so a user can view the summary of monetary donations
    ///         they've made to projects.
    ///
    /// Last Updated By: Skyann Heintz
    /// Last Updated: 2025-04-27
    /// What Was Changed: Styling added. Adjusted the location of the filter button
    /// </summary>
-->

@model IEnumerable<DataDomain.DonationVM>

@{
    ViewData["Title"] = "My Donation History";
}

<h1 class="text-center">My Donation History</h1>

@if (Model.Any())
{
    <a href="@Url.Action("Summary", new { userID = Model.First().UserID })" class="btn btn-info">Donation Summaries (Monetary Only)</a>
}
else
{
    <p>No donations found.</p>
}

<div class="row mb-3">
    <div class="col-md-2">
        <label for="minAmount">Min Amount:</label>
        <input type="number" id="minAmount" class="form-control form-control-sm" oninput="filterByAmount()" />
    </div>
    <div class="col-md-4">
        <div class="row">
            <div class="col-md-6">
                <label for="maxAmount">Max Amount:</label>
                <input type="number" id="maxAmount" class="form-control form-control-sm" oninput="filterByAmount()" />
            </div>
            <div class="col-md-6 d-flex align-items-end">
                <button onclick="filterByAmount()" class="btn btn-primary btn-sm w-100">Apply Filter</button>
            </div>
        </div>
    </div>
</div>

<table class="table table-striped table-bordered table-hover">
    <thead class="thead-dark">
        <tr>
            <th class="header">
                @Html.DisplayNameFor(model => model.Name)
            </th>
            <th class="header">
                Donation Type
            </th>
            <th class="header">
                @Html.DisplayNameFor(model => model.Amount)
            </th>
            <th class="header">
                Donation Date
            </th>
            <th class="header">
                @Html.DisplayNameFor(model => model.Description)
            </th>
            <th class="header"></th>
        </tr>
    </thead>
    <tbody>
@foreach (var item in Model) {
        <tr>
            <td>
                @Html.DisplayFor(modelItem => item.Name)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.DonationType)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.Amount)
            </td>
            <td>
                @* @Html.DisplayFor(modelItem => item.DonationDate.ToString("MM-dd-yyyy")) *@

                    @item.DonationDate.ToString("MM-dd-yyyy")
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.Description)
            </td>
            <td>
                <div class="d-flex flex-wrap justify-content-center gap-2">
                @* <a asp-action="Edit" asp-route-id="@item.DonationID">Edit</a> | *@
                    <a asp-action="Details"  asp-route-id="@item.DonationID" class="btn btn-primary btn-sm">Details</a> 
                    @* <a asp-controller="Donations" asp-action="Index">Back to List</a> *@
                @* <a asp-action="Delete" asp-route-id="@item.DonationID">Delete</a> *@
                </div>
            </td>
        </tr>
}
    </tbody>
</table>
